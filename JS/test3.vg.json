{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 700, "height": 400,
    "data": {"url": "https://raw.githubusercontent.com/user0028/visualization2/main/Data/owid-covid-data.csv"},
    "mark": "circle",
    "transform": [
        {
          "calculate": "toNumber(datum.people_fully_vaccinated_per_hundred)",
          "as": "people_fully_vaccinated_per_hundred"
        },
        {
            "aggregate": [
                {"op": "max", "field": "gdp_per_capita", "as": "GDP"}, 
                {"op": "max", "field": "people_fully_vaccinated_per_hundred", "as": "VAX"},
                {"op": "max", "field": "population", "as": "POP"}
              ],
            "groupby": ["location"]
        }
    ],
    "encoding": {
      "x": {
        "field": "GDP",
        "title": "GDP Per Capita",
        "scale": {"type": "sqrt", "domain": [1, 120000]},
        "axis": {"tickCount": 10}
      },
      "y": {
        "field": "VAX",
        "title": "People Vaccinated Per Hundred 101",
        "scale": {"type": "linear", "domain": [0, 90]},
        "axis": {"tickCount": 10}
      },
      "size":{
        "field": "POP",
        "type": "quantitative",
        "scale": {
            "type": "threshold",
            "domain": [1000000, 10000000, 50000000, 100000000, 500000000],
            "range": [10, 50, 150, 200, 300, 400]
            }
      },
      "tooltip": [
        {"field": "GDP"},
        {"field": "location"},
        {"field": "VAX"},
        {"field": "POP"}
      ]
          
          
          

    }
  }